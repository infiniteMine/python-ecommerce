{% extends "ecommerce/base.html" %}

{% block content %}
	<div class="container item-edit" id="item-{{ product.id }}">
		<p class="ml-b"><a href = "/ecommerce/user/products" class="ml-b text-success"><span class="glyphicon glyphicon-chevron-left"></span> All products</a></p>
		
		<div class="panel panel-default">
			<div class="panel-heading">
				Edit Product
			</div>
			<div class="panel-body wave-box-wrapper">
				<div class="wave-box"></div>
				<form action="{% url 'ecommerce:user_product_update' product.id %}" method="post" enctype="multipart/form-data" class="update-product" >
					{% csrf_token %}
					<div class="col-md-8">
						<div class="form-group">
							<label>Name</label>
							<input type="text" class="form-control" name="name" value="{{ product.name }}" />
						</div>
						<div class="form-group">
							<label>Description</label>
							<textarea id="ck-editor-area" class="form-control" name="content">{{ product.content }}</textarea>
						</div>
						<div class="form-group">
							<label>Short Description</label>
							<textarea class="form-control" name="excerpt" rows="7">{{ product.excerpt }}</textarea>
						</div>
						<div class="form-group ml-t">
							<label>Upload Images</label>
							<input type = "file" name = "images" accept = "image/*" class = "form-control image-input" multiple />
							<hr />
							
							<div class = "clearfix m-t images-section">
								{% if product.image_set.all %}
									{% for data in product.image_set.all %}
										<div class = "col-sm-3">
											<span class="unset-image glyphicon glyphicon-remove text-danger lead m-0 c-p" id="unset-{{ data.id }}" title="Delete image"></span>
											{% if product.featured_image == data.image %}
												<span class="set-featured-image glyphicon glyphicon-star lead m-0 c-p" title="Set as featured image" id="featured-{{ data.image }}" style="color: #E4C317"></span>
											{% else %}
												<span class="set-featured-image glyphicon glyphicon-star-empty lead m-0 c-p" title="Set as featured image" id="featured-{{ data.image }}"></span>
											{% endif %}
											<img src = "/ecommerce/{{ data.image }}" class = "img-thumbnail img-responsive" />
										</div>
										
										{% if forloop.counter|divisibleby:4 == 1 %}
											<div class = "clearfix"></div>
										{% endif %}
									{% endfor %}
								{% else %}
									<p class = "alert alert-danger no-item-images">No images found</p>
								{% endif %}
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							<label>Price</label>
							<div class="input-group">
								<div class="input-group-addon">$</div>
								<input type="text" class="form-control" name="price" value="{{ product.price }}" placeholder="Amount">
							</div>
						</div>
						<div class="form-group">
							<label>Status</label>
							<select class="form-control" name="status">
								<option value="1" {% if product.status == 1 %}selected{% endif %}>Active</option>
								<option value="0" {% if product.status == 0 %}selected{% endif %}>Inactive</option>
							</select>
						</div>
						<div class="form-group">
							<label>Quantity</label>
							<input type="number" class="form-control" name="quantity" value="{{ product.quantity }}" />
						</div>
						<input type="submit" class="btn btn-success" value="Update" />
					</div>
				</form>
			</div>
		</div>
	</div>
{% endblock %}